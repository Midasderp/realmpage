<!doctype html>
<meta charset=utf-8>
<title>Realm of the Mad God</title>
<style>body{text-align:center;overflow:hidden;background-color:#000;margin:0px;}</style>
<script src="http://www.realmofthemadgod.com/js/AC_OETags.js"></script>
<script>
/* ----------------------------------------------------------------------------
one time settings. the uid and token can easily be found using the chrome dev 
tools in chrome or firebug for firefox.
-----------------------------------------------------------------------------*/
// displays in the top right corner on the char select screen, set to anything you want
var logged_in_as = 'Hello YouTube!'; 
// your kongregate user id
var kong_uid = '#######';
// your kongregate auth token
var token = '###########################################################'; 

// shouldn't need to change this unless you want to change width/height/quality
function run() {
	var flashvars = 'kongregate_username='+logged_in_as+'&kongregate_user_id='+kong_uid+'&kongregate_game_auth_token='+token+'&kongregate_api_path='+api_path;
	AC_FL_RunContent(
		"src", "http://www.realmofthemadgod.com/AGCLoader"+game_version,
		"FlashVars", flashvars,
		"width", "800",
		"height", "600",
		"quality", "low",
		"bgcolor", "#000000",
		"allowScriptAccess", "always",
		"wmode", "direct"
	);
}

// callbacks for the queries below
function versioncb(res) {
	game_version = res.query.results.body.p
}
function kongcb(res) {
	api_path = res.query.results.script.match(/"kongregate_api_path":"([^"]+)"/)[1]
	run()
}
</script>
<script src="http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20html%20where%20url%3D%22http%3A%2F%2Fwww.realmofthemadgod.com%2Fversion.txt%22&format=json&callback=versioncb"></script>
<script src="http://query.yahooapis.com/v1/public/yql?q=select%20content%20from%20html%20where%20url%3D%22http%3A%2F%2Fwww.kongregate.com%2Fgames%2FWild_Shadow%2Frealm-of-the-mad-god%22%20and%20xpath%3D'%2F%2F*%5B%40id%3D%22game%22%5D%2Fscript'&format=json&callback=kongcb"></script>
